# 自动播放重置功能

## 功能说明

当用户进行手动操作后，轮播组件会自动重置自动播放的计时器，确保用户有足够的时间查看当前内容，避免在用户刚操作完就立即自动切换。

## 触发重置的操作

以下操作会触发自动播放计时器重置：

1. **点击指示器** - 点击轮播指示器切换图片
2. **点击箭头** - 点击前后箭头按钮切换图片
3. **手势滑动** - 通过左右滑动切换图片（滑动距离超过阈值）

## 重置逻辑

### 手势滑动场景

- **滑动导致切换**：重置计时器，从当前时间开始重新计时
- **滑动未导致切换**：恢复自动播放，继续原有计时

### 其他手动操作

- **点击指示器/箭头**：立即重置计时器

## 代码实现

```typescript
// 重置自动播放计时器
resetAutoplay() {
  if (this.properties.autoplay) {
    this.startAutoplay();
  }
}

// 在手动操作后调用
onDotTap(e: any) {
  const index = e.currentTarget.dataset.index;
  this.goToIndex(index);
  // 重置自动播放计时器
  this.resetAutoplay();
}

onTouchEnd(e: any) {
  // ... 滑动处理逻辑

  if (Math.abs(dragOffset) > swipeThreshold) {
    // 滑动导致切换
    this.goToIndex(newIndex);
    // 重置自动播放计时器
    this.resetAutoplay();
  } else {
    // 滑动未导致切换
    this.goToIndex(currentIndex);
    // 恢复自动播放
    if (this.properties.autoplay) {
      this.startAutoplay();
    }
  }
}
```

## 使用示例

```xml
<!-- 基础用法，自动播放间隔5秒 -->
<custom-swiper
  items="{{swiperItems}}"
  autoplay="{{true}}"
  interval="{{5000}}"
  enableSwipe="{{true}}">
</custom-swiper>
```

## 用户体验

### 场景 1：用户点击指示器

- 轮播切换到指定图片
- 自动播放计时器重置
- 5 秒后自动切换到下一张

### 场景 2：用户手势滑动

- 滑动距离足够，切换到下一张
- 自动播放计时器重置
- 5 秒后自动切换到下一张

### 场景 3：用户轻微滑动

- 滑动距离不足，回到原位
- 自动播放继续原有计时
- 不会立即重置

## 配置建议

1. **自动播放间隔**

   - 建议设置 3-8 秒
   - 太短会影响用户阅读
   - 太长会让用户感觉响应慢

2. **滑动阈值**

   - 建议设置 30-80px
   - 与自动播放重置功能配合使用
   - 避免误触导致意外切换

3. **动画时长**
   - 建议设置 200-500ms
   - 提供流畅的视觉反馈
   - 不影响自动播放重置逻辑

## 注意事项

1. **性能考虑**

   - 重置计时器会创建新的定时器
   - 确保在组件销毁时清理定时器

2. **用户体验**

   - 重置功能让用户有更多时间查看内容
   - 避免在用户操作后立即自动切换

3. **兼容性**
   - 功能在所有支持微信小程序的设备上正常工作
   - 与手势滑动功能完美配合
